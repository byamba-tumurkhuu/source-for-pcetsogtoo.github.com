<!DOCTYPE HTML>

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="author" content="Byambatsogt Tumurkhuu" />
    <title>Jekyll, GitHub хуудсын тухай</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/site.css" />
    <link rel="stylesheet" href="/css/pygments_default.css" />

  </head>
  <body>

    <div class="container" >

      <div class="left-sidebar float_left">
        <ul class="unstyled">
          <li><a href="/">Home</a></li>
          <li><a href="/posts.html">Posts</a></li>
          <li><a href="/about.html">About</a></li>
        </ul>
      </div>


      <div class="main">
        <div class="page-header">
          <h1>
            <a href="/">Eternal Loop</a>
            <small> by Byambatsogt Tumurkhuu </small>
          </h1>
        </div>
        
        <div class="content float_left">
          <div class="post">
  <div>October 25, 2011</div> 

  <h4 class="post-title">
    <a class="post_title" href="/2011/10/25/jekyll-github-page">Jekyll, GitHub хуудсын тухай</a>
  </h4>

  <div class="post-content"> <p>Амархан сайн байна уу? Будаг нь ханхалсан блогоосоо таны мэндийг айлтгая. Ойрын үед ажил, хичээл, шалгалт зэрэг олон зүйл давхцсан ч
дундуур нь блогоо <a href="https://github.com/mojombo/jekyll">Jekyll</a> дээр хийгээд амжлаа. <a href="https://github.com/mojombo/jekyll">Jekyll</a> бол рүби дээр суурилсан блог маягийн статик сайт үүсгэх зориулалттай
програм юм. Блогспотын хязгаарлагдмал байдал, ойлгомжгүй нүсэр темплайт систем зэрэг олон зүйлээс нь нэгэнтээ залхаад байсны дээр
<a href="http://pages.github.com">GitHub хуудас</a> <a href="https://github.com/mojombo/jekyll">Jekyll</a>-ийг дэмждэг тухай дуулмагц уухайн тас <a href="https://github.com/mojombo/jekyll">Jekyll</a> руу урвачихлаа. <a href="http://pages.github.com">GitHub хуудасын</a> тухай товчхон
өгүүлэхэд энэ нь хэрэглэгчиддээ хувийн дэд домайнээ үүсгэх, мөн статик html вэб хост хийх боломж олгодог юм байна. Жишээ нь миний
гитхаб хэрэглэгчийн нэр pcetsogtoo бөгөөд би <a href="http://pcetsogtoo.github.com">pcetsogtoo.github.com</a> гэсэн дэд домайн эзэмшиж байна.
Github дээр өөрийн хуудсыг дараах 2 алхмаар л үүсгэнэ.</p>

<ol>
<li>username.github.com гэсэн репо үүсгэнэ.</li>
<li>index.html файл үүсгээд мастер репо луугаа түлхэнэ.</li>
</ol>


<p>Хамгийн эхний түлхэлт дээр 10 минут хүртэл хугацаа шаардагдаж байж хуудас луу хандах эрхтэй болно.</p>

<p>Ингээд блогспотоос <a href="https://github.com/mojombo/jekyll">Jekyll</a> рүү хэрхэн шилжсэн тухайгаа тоймлон хүргэе.</p>

<p><strong> <a href="https://github.com/mojombo/jekyll">Jekyll</a> суулгах </strong></p>

<p>Суулгах команд:</p>

<div class="highlight"><pre><code class="bash">sudo apt-get install ruby1.8-dev
sudo gem install jekyll
</code></pre>
</div>


<p><strong> Сайтыхаа ерөнхий дезайныг зохиох </strong></p>

<p><a href="https://github.com/mojombo/jekyll/wiki/Usage">Энд</a> бичигдсэн зааврын дагуу файл, хавтсаа зохион байгуулна. Бичлэгүүдээ дүрслэхдээ <a href="https://github.com/shopify/liquid/wiki/liquid-for-designers">Liquid</a> код бичих шаардлагатай.
Код бичихээс залхуурах зүйл огтохон ч байсангүй. Маш багахан код бичээд нүүр хуудастаа бичлэгүүдээ гаргачихаж байна.  Жишээ нь:</p>

<div class="highlight"><pre><code class="html">  {% for post in site.posts limit: 4 %} 
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h4</span> <span class="na">class=</span><span class="s">&quot;post-title&quot;</span><span class="nt">&gt;</span>
        {{ post.title }}
      <span class="nt">&lt;/h4&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;post-content&quot;</span><span class="nt">&gt;</span> 
        {{ post.content }}
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  {% endfor %} 
</code></pre>
</div>


<p><a href="https://github.com/shopify/liquid/wiki/liquid-for-designers">Liquid</a> темплэйт sites, page, post гэх мэт глобал өгөгдөлөөр хангадаг. Темплэйтийн өгөгдлийн талаар дэлгэрэнгүйг
<a href="https://github.com/mojombo/jekyll/wiki/Template-Data">https://github.com/mojombo/jekyll/wiki/Template-Data</a>-с хараарай.</p>

<p>CSS дезайны мэдлэг маруухан надад Твиттерийн <a href="http://twitter.github.com/bootstrap">Bootstrap</a> ёстой их тус болов.  Мөн _config.yml файл дээр сайтынхаа
ерөнхий <a href="https://github.com/mojombo/jekyll/wiki/Configuration">тохиргоог</a> хийнэ. Эхний ээлжинд бичлэгийн URL тохиргоо, <a href="http://daringfireball.net/projects/markdown">Markdown</a> синтакс хөрвүүлэгч сонгох зэрэг хялбар хэдэн тохиргоо хийлээ.
Ер нь өөрөө тэгээс эхэлж хийснээс <a href="https://github.com/mojombo/jekyll/wiki/Sites">бусад хүмүүсийн хийсэн сайтыг</a>
темплайт болгоод өөрчлөөд явбал илүү хурдан хялбар сурах юм байна гэж бодогдсон.</p>

<p><strong> Нэмэлт плагин суулгах </strong></p>

<p><a href="https://github.com/mojombo/jekyll">Jekyll</a> нь статик сайт үүсгэдэг хэдий ч нэмэлт <a href="https://github.com/mojombo/jekyll/wiki/Plugins">плагинуудаар</a> Jykell-ийг өргөтгөх боломжтой нь таатай хэрэг юм.
Эхний ээлжинд код тодруулах pygments, tag cloud үүсгэх плагинуудыг суулгалаа. Яваандаа RSS болон хайлтын плагин суулгана.
Өөрөө плагин хийхэд ч хүндрэлгүй юм шиг санагдсан.</p>

<p><strong> Сэтгэгдэл нэмэх </strong></p>

<p><a href="https://github.com/mojombo/jekyll">Jekyll</a> маань статик сайт үүсгэдэг учир сэтгэгдэлээ аутсоорс хийхээс өөр аргагүй. Энэ хэрэглээнд <a href="http://disqus.com">Disqus</a>-ийг ашиглав.
Жаваскрипт дуудалт хийгээд сайтдаа сэтгэгдэл үлдээх хэсэгтэй болчлоо.</p>

<p><strong> Блогспотоос бичлэгүүдээ зөөх </strong></p>

<p>Хоёрхон бичлэгтэй байсан учир <a href="http://johnmacfarlane.net/pandoc/try">Pandoc</a> ашиглаад html-ээс markdown луу хөрвүүлэв.
Бараг гар ажиллагаар шахуу юмдаа. Хэрэв олон бичлэгтэй бол Jekyll-ээс гаргасан <a href="https://github.com/mojombo/jekyll/wiki/blog-migrations">зааврын</a>
дагуу хөрвүүлэхэд болохоор харагдаж байсан.</p>

<p><strong> Домэйн нэрээ шилжүүлэх </strong></p>

<p><a href="http://pcetsogtoo.github.com">pcetsogtoo.github.com</a> гоё боловч нэгэнт авсан <a href="http://www.byambatsogt.com">www.byambatsogt.com</a>-оо ашиглах хэрэгтэй байлаа.
Прожектийнхоо эх хавтаст CNAME нэртэй файл үүсгэж дотор нь домэйн нэрээ бичнэ. Ингээд DNS тохиргооныхоо A бичлэгээ 207.97.227.245 хаяг луу заалгана.</p>

<p><strong> GitHub луу деплой хийх </strong></p>

<p>Амжилттай явсаар байсан ч деплой хийх дээрээ жаахан саатав. Миний ойлгосноор Jekyll эх кодоо мастер репо луугаа түлхэхэд
гитхаб автоматаар html кодыг үүсгэж сайтыг маань байгуулна. Тиймээс деплой хийх нь маш хялбархан. Ердөө өөрчлөлтөө
коммит хийгээд мастер репо луугаа пүш хийнэ. Эхний хэдэн коммитоо амжилттай деплой
хийгээд явж байсан ч нэг томоохон өөрчлөлтийн дараа гитхаб кодоос маань зөв html үүсгэхгүй байгаа нь мэдэгдэв.
Чухам яг юуг буруу хийсэн юм чөтгөр бүү мэд, хайгаад олсонгүй. Локал дээрээ зөв ажиллаж байгаа боловч гитхаб луу деплой хийхэд
темплэйтээ зөв рендерлэхгүй байлаа. Ингээд автоматаар деплой хийдэг скрипт бичлээ. Үндсэн санаа нь скрипт ажиллах бүрт /tmp-т шинэ хавтас
үүсгэн мастер репогоо хуулбарлаж авна. Jekyll-ийн үүсгэсэн статик контентоо хуулсан репотогоо нийлүүлээд мастер репо луу түлхэнэ.</p>

<div class="highlight"><pre><code class="bash"><span class="c">#!/bin/bash</span>

<span class="nv">tmp</span><span class="o">=</span>/tmp/tmp<span class="nv">$$</span>

<span class="nv">git_dir</span><span class="o">=</span><span class="nv">$tmp</span>-git_dir
<span class="nv">site_dir</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/site
<span class="nv">reponame</span><span class="o">=</span>pcetsogtoo.github.com
<span class="nv">repo</span><span class="o">=</span>git@github.com:pcetsogtoo/pcetsogtoo.github.com.git

<span class="k">function </span>USAGE<span class="o">(){</span>
cat <span class="s">&lt;&lt; EOF</span>
<span class="s">&quot;USAGE: ./deploy &quot;Git commit message&quot;</span>
<span class="s">EOF</span>
<span class="nb">exit </span>1
<span class="o">}</span>
<span class="o">[</span> -z <span class="s2">&quot;$1&quot;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> USAGE 

<span class="nv">message</span><span class="o">=</span><span class="nv">$1</span> <span class="c"># Commit хийх мессеж</span>

mkdir -p <span class="nv">$git_dir</span>
<span class="nb">cd</span> <span class="nv">$git_dir</span>

git clone <span class="nv">$repo</span>
<span class="nb">cd</span> <span class="nv">$reponame</span>

git rm -r ./* <span class="c"># Wipe out current content</span>

cp -rp <span class="nv">$site_dir</span>/* . <span class="c"># Copy entire generated static content so I can adjust deletion &amp; insertion</span>
git add .
git commit -m <span class="s2">&quot;$message&quot;</span> <span class="o">&amp;&amp;</span>  git push

sudo rm -r <span class="nv">$tmp</span>-*
<span class="nb">exit </span>0
</code></pre>
</div>


<p>Ингээд өөрийн гэсэн гитхабийн дэд домэйнтэй бас статик хуудас хосттой боллоо. Үнэхээр минимал, ашиглахад хялбар юм. Блог хийх ерөнхий
ажлаа нэг орой л дуусгачихсан. Хамгийн чухал нь эрх чөлөөтэй, өөрийн хийсэн юм цаанаа л нэг өөр байх юм. Та бүхэн ч бас <a href="https://github.com/mojombo/jekyll">Jekyll</a>
туршаад үзээрэй. Таалагдана гэдэгт итгэлтэй байна.</p>

<p><strong> Сурвалж </strong></p>

<ul>
<li><a href="https://github.com/pcetsogtoo/source-for-pcetsogtoo.github.com">Энэ сайтын Jekyll эх код</a></li>
<li><a href="https://github.com/pcetsogtoo/pcetsogtoo.github.com">Энэ сайтын үүсгэгдсэн статик код</a></li>
<li><a href="https://github.com/mojombo/jekyll/wiki">https://github.com/mojombo/jekyll/wiki</a></li>
<li><a href="https://github.com/mojombo/jekyll/wiki/yaml-front-matter">YAML</a></li>
<li><a href="http://www.liquidmarkup.org/">Liquid Template Engine</a></li>
</ul>

 </div>

  <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
    var disqus_shortname = 'mygithubpage';

    (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>

</div>

        </div>

        <div class="right-sidebar float_right">

          <div class="sidebox">
            <h5> Recent Posts</h5>
            
            <li>
              <a href="/2011/10/25/jekyll-github-page">Jekyll, GitHub хуудсын тухай</a>
            </li>
            
            <li>
              <a href="/2011/09/28/%D1%81%D0%BA%D0%B0%D0%BB%D0%B0%D0%B3%D0%B8%D0%B9%D0%BD-%D1%82%D1%83%D1%85%D0%B0%D0%B9-%D1%82%D0%BE%D0%B2%D1%87%D1%85%D0%BE%D0%BD">Скалагийн тухай товчхон</a>
            </li>
            
            <li>
              <a href="/2011/09/22/ballmer-peak">Эхний бичлэг буюу Ballmer Peak гэж юу вэ?</a>
            </li>
            
          </div>

          <div class="sidebox">
            <h5>Tag Cloud</h5>
            <div class='cloud'>
              <a style='font-size: -nan%' href='/tags.html#наргиа'>наргиа</a>
<a style='font-size: -nan%' href='/tags.html#Jekyll'>Jekyll</a>
<a style='font-size: -nan%' href='/tags.html#GitHub Page'>GitHub Page</a>
<a style='font-size: -nan%' href='/tags.html#Disqus'>Disqus</a>
<a style='font-size: -nan%' href='/tags.html#ballmer peak'>ballmer peak</a>
<a style='font-size: -nan%' href='/tags.html#Liquid'>Liquid</a>
<a style='font-size: -nan%' href='/tags.html#scala'>scala</a>
 
            </div>
          </div>

          <div class="sidebox">
            <h5>Latest Tweets</h5>
            <div id="twitter_update_list"></div>
            <script src="http://twitter.com/javascripts/blogger.js" type="text/javascript"></script>
            <script src="http://twitter.com/statuses/user_timeline/pcetsogtoo.json?callback=twitterCallback2&amp;count=6" type="text/javascript"></script>
            <center>
              <a href="http://twitter.com/pcetsogtoo" target="_blank">
                <img src="http://indicebloggerfiles.googlepages.com/follow-me.png" title="Follow me on Twitter" />
              </a>
            </center>
          </div>

        </div>

        <div class="clear"></div>

        <footer>
        <p>&copy; Byambatsogt Tumurkhuu 2011. Powered by Jekyll</p>
        </footer>
      </div>


    </div> 


  </body>
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26003238-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</html>
